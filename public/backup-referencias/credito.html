<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí≥ Cr√©dito - Gesti√≥n Financiera</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Cr√©dito - Dise√±o Elegante con Animaciones Tipo Grok (Tema Dorado/Verde) */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: 
                linear-gradient(135deg, 
                    #fefce8 0%, 
                    #fef3c7 15%, 
                    #fde68a 30%, 
                    #fcd34d 45%, 
                    #f59e0b 60%, 
                    #d97706 75%, 
                    #92400e 90%, 
                    #78350f 100%
                );
            background-size: 400% 400%;
            animation: creditGradient 24s ease infinite;
            background-attachment: fixed;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            color: #1e293b;
            position: relative;
            overflow-x: hidden;
        }

        @keyframes creditGradient {
            0% { background-position: 0% 50%; }
            20% { background-position: 100% 0%; }
            40% { background-position: 100% 100%; }
            60% { background-position: 0% 100%; }
            80% { background-position: 0% 0%; }
            100% { background-position: 0% 50%; }
        }

        /* Capa 1: Ondas de dinero (flujo de cr√©dito) */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at 25% 15%, rgba(245, 158, 11, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 75% 85%, rgba(217, 119, 6, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 15% 75%, rgba(251, 191, 36, 0.09) 0%, transparent 50%),
                radial-gradient(ellipse at 85% 25%, rgba(146, 64, 14, 0.07) 0%, transparent 50%);
            animation: creditWaves 28s ease-in-out infinite;
            pointer-events: none;
            z-index: -3;
        }

        @keyframes creditWaves {
            0%, 100% {
                transform: translateX(0) translateY(0) rotate(0deg) scale(1);
                opacity: 0.6;
            }
            20% {
                transform: translateX(-25px) translateY(-35px) rotate(2deg) scale(1.08);
                opacity: 0.8;
            }
            40% {
                transform: translateX(30px) translateY(20px) rotate(-2deg) scale(0.92);
                opacity: 0.5;
            }
            60% {
                transform: translateX(-20px) translateY(-15px) rotate(1deg) scale(1.05);
                opacity: 0.7;
            }
            80% {
                transform: translateX(15px) translateY(25px) rotate(-1deg) scale(0.95);
                opacity: 0.6;
            }
        }

        /* Capa 2: Red financiera (conexiones bancarias) */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(45deg, transparent 46%, rgba(245, 158, 11, 0.04) 47%, rgba(245, 158, 11, 0.04) 53%, transparent 54%),
                linear-gradient(-45deg, transparent 46%, rgba(217, 119, 6, 0.03) 47%, rgba(217, 119, 6, 0.03) 53%, transparent 54%),
                linear-gradient(90deg, transparent 46%, rgba(251, 191, 36, 0.025) 47%, rgba(251, 191, 36, 0.025) 53%, transparent 54%),
                linear-gradient(0deg, transparent 46%, rgba(146, 64, 14, 0.035) 47%, rgba(146, 64, 14, 0.035) 53%, transparent 54%);
            background-size: 180px 180px, 240px 240px, 120px 120px, 200px 200px;
            animation: financialNetwork 40s linear infinite;
            pointer-events: none;
            z-index: -2;
        }

        @keyframes financialNetwork {
            0% {
                transform: translateX(0) translateY(0) rotate(0deg);
                opacity: 0.4;
            }
            25% {
                transform: translateX(-40px) translateY(-30px) rotate(90deg);
                opacity: 0.6;
            }
            50% {
                transform: translateX(30px) translateY(-50px) rotate(180deg);
                opacity: 0.5;
            }
            75% {
                transform: translateX(-20px) translateY(-40px) rotate(270deg);
                opacity: 0.7;
            }
            100% {
                transform: translateX(0) translateY(0) rotate(360deg);
                opacity: 0.4;
            }
        }

        /* Capa 3: Part√≠culas de cr√©dito flotantes */
        .floating-credit {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: -1;
        }

        .credit-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.7), rgba(245, 158, 11, 0.1));
            border-radius: 50%;
            animation: floatCredit 20s ease-in-out infinite;
        }

        .credit-particle:nth-child(1) {
            top: 25%;
            left: 15%;
            animation-delay: 0s;
            animation-duration: 22s;
        }

        .credit-particle:nth-child(2) {
            top: 75%;
            left: 85%;
            animation-delay: -4s;
            animation-duration: 26s;
        }

        .credit-particle:nth-child(3) {
            top: 45%;
            left: 75%;
            animation-delay: -8s;
            animation-duration: 20s;
        }

        .credit-particle:nth-child(4) {
            top: 65%;
            left: 25%;
            animation-delay: -12s;
            animation-duration: 24s;
        }

        .credit-particle:nth-child(5) {
            top: 35%;
            left: 55%;
            animation-delay: -16s;
            animation-duration: 28s;
        }

        .credit-particle:nth-child(6) {
            top: 15%;
            left: 65%;
            animation-delay: -20s;
            animation-duration: 21s;
        }

        .credit-particle:nth-child(7) {
            top: 85%;
            left: 45%;
            animation-delay: -6s;
            animation-duration: 25s;
        }

        @keyframes floatCredit {
            0%, 100% {
                transform: translateX(0) translateY(0) scale(0.4);
                opacity: 0.3;
            }
            25% {
                transform: translateX(50px) translateY(-60px) scale(1.4);
                opacity: 0.9;
            }
            50% {
                transform: translateX(-40px) translateY(-120px) scale(0.8);
                opacity: 0.6;
            }
            75% {
                transform: translateX(60px) translateY(-80px) scale(1.2);
                opacity: 0.8;
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(254, 243, 199, 0.8);
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 
                0 4px 20px rgba(245, 158, 11, 0.08),
                0 1px 3px rgba(15, 23, 42, 0.1);
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideInDown 0.8s ease-out;
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            margin: 0;
            color: #d97706;
            font-size: 2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: #d97706;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn:hover {
            background: rgba(245, 158, 11, 0.15);
            border-color: #d97706;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.2);
        }

        /* Tabs de calculadoras */
        .calculator-tabs {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(254, 243, 199, 0.8);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 2rem;
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            animation: slideInUp 0.8s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-btn {
            background: rgba(245, 158, 11, 0.1);
            border: 2px solid rgba(245, 158, 11, 0.2);
            color: #d97706;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(245, 158, 11, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .tab-btn:hover::before {
            left: 100%;
        }

        .tab-btn:hover, .tab-btn.active {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border-color: #f59e0b;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.3);
        }

        /* Grid principal */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .calculator-card, .results-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(254, 243, 199, 0.8);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 
                0 4px 20px rgba(245, 158, 11, 0.06),
                0 1px 3px rgba(15, 23, 42, 0.1);
            animation: slideInLeft 0.8s ease-out;
        }

        .results-card {
            animation: slideInRight 0.8s ease-out;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .card-title {
            margin: 0 0 1.5rem 0;
            color: #d97706;
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #374151;
        }

        .form-control, .form-select {
            width: 100%;
            padding: 0.875rem;
            border: 2px solid rgba(254, 243, 199, 0.8);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .form-control:focus, .form-select:focus {
            outline: none;
            border-color: #f59e0b;
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
            transform: translateY(-1px);
        }

        .input-group {
            position: relative;
        }

        .input-addon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
            font-weight: 600;
            pointer-events: none;
        }

        .input-group .form-control {
            padding-left: 2.5rem;
        }

        .btn-calculate {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .btn-calculate::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .btn-calculate:hover::before {
            left: 100%;
        }

        .btn-calculate:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.3);
        }

        /* Resultados */
        .result-item {
            background: rgba(254, 243, 199, 0.3);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .result-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #f59e0b, #d97706);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }

        .result-item:hover::before {
            transform: scaleX(1);
        }

        .result-item:hover {
            background: rgba(254, 243, 199, 0.5);
            transform: scale(1.02);
        }

        .result-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: #d97706;
            margin-bottom: 0.5rem;
        }

        .result-label {
            font-size: 0.875rem;
            color: #64748b;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Gr√°fico de amortizaci√≥n */
        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(254, 243, 199, 0.8);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 
                0 4px 20px rgba(245, 158, 11, 0.06),
                0 1px 3px rgba(15, 23, 42, 0.1);
            animation: fadeInScale 0.8s ease-out;
            animation-delay: 0.3s;
            opacity: 0;
            animation-fill-mode: forwards;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .chart-area {
            position: relative;
            height: 400px;
            margin-bottom: 1rem;
        }

        /* Tabla de amortizaci√≥n */
        .amortization-table {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(254, 243, 199, 0.8);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 
                0 4px 20px rgba(245, 158, 11, 0.06),
                0 1px 3px rgba(15, 23, 42, 0.1);
            animation: slideInUp 0.8s ease-out;
            animation-delay: 0.4s;
            opacity: 0;
            animation-fill-mode: forwards;
            margin-bottom: 2rem;
        }

        .table-wrapper {
            max-height: 400px;
            overflow-y: auto;
            border-radius: 8px;
        }

        .amortization-schedule {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }

        .amortization-schedule th,
        .amortization-schedule td {
            padding: 0.75rem;
            text-align: right;
            border-bottom: 1px solid rgba(254, 243, 199, 0.3);
        }

        .amortization-schedule th {
            background: rgba(254, 243, 199, 0.4);
            font-weight: 600;
            color: #374151;
            position: sticky;
            top: 0;
        }

        .amortization-schedule tr:hover {
            background: rgba(254, 243, 199, 0.2);
        }

        .amortization-schedule th:first-child,
        .amortization-schedule td:first-child {
            text-align: center;
        }

        /* Comparador de pr√©stamos */
        .comparison-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(254, 243, 199, 0.8);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 
                0 4px 20px rgba(245, 158, 11, 0.06),
                0 1px 3px rgba(15, 23, 42, 0.1);
            animation: slideInUp 0.8s ease-out;
            animation-delay: 0.5s;
            opacity: 0;
            animation-fill-mode: forwards;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .comparison-card {
            background: rgba(254, 243, 199, 0.2);
            border: 2px solid rgba(245, 158, 11, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .comparison-card:hover {
            border-color: #f59e0b;
            background: rgba(254, 243, 199, 0.3);
            transform: translateY(-2px);
        }

        .comparison-card.best {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .comparison-card.best::before {
            content: '‚≠ê Mejor Opci√≥n';
            display: block;
            background: #10b981;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 1rem;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .calculator-tabs {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .calculator-tabs {
                flex-direction: column;
            }

            .tab-btn {
                text-align: center;
            }

            .header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .chart-area {
                height: 300px;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Estados ocultos para tabs */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Efectos hover para las tarjetas */
        .calculator-card:hover, .results-card:hover, .chart-container:hover, 
        .amortization-table:hover, .comparison-section:hover {
            transform: translateY(-4px);
            box-shadow: 
                0 12px 40px rgba(245, 158, 11, 0.12),
                0 4px 12px rgba(15, 23, 42, 0.1);
        }

        /* Loading states */
        .loading-shimmer {
            background: linear-gradient(90deg, #fef3c7 25%, #fde68a 50%, #fef3c7 75%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Reducir animaciones para usuarios con preferencias de movimiento reducido */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Part√≠culas flotantes de cr√©dito -->
    <div class="floating-credit">
        <div class="credit-particle"></div>
        <div class="credit-particle"></div>
        <div class="credit-particle"></div>
        <div class="credit-particle"></div>
        <div class="credit-particle"></div>
        <div class="credit-particle"></div>
        <div class="credit-particle"></div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üí≥ Simulador de Cr√©dito</h1>
            <a href="dashboard.html" class="back-btn">
                ‚Üê Volver al Dashboard
            </a>
        </div>

        <!-- Tabs de Calculadoras -->
        <div class="calculator-tabs">
            <button class="tab-btn active" data-tab="loan">
                üè† Pr√©stamo Hipotecario
            </button>
            <button class="tab-btn" data-tab="personal">
                üë§ Pr√©stamo Personal
            </button>
            <button class="tab-btn" data-tab="car">
                üöó Financiamiento Auto
            </button>
            <button class="tab-btn" data-tab="comparison">
                ‚öñÔ∏è Comparar Opciones
            </button>
        </div>

        <!-- Calculadora de Pr√©stamo Hipotecario -->
        <div id="loan-content" class="tab-content active">
            <div class="main-grid">
                <!-- Formulario de C√°lculo -->
                <div class="calculator-card">
                    <h2 class="card-title">üè† Calculadora Hipotecaria</h2>
                    
                    <div class="form-group">
                        <label for="loanAmount">üí∞ Monto del Pr√©stamo</label>
                        <div class="input-group">
                            <span class="input-addon">$</span>
                            <input type="number" id="loanAmount" class="form-control" 
                                   placeholder="200,000" value="200000" min="1000" step="1000">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="loanTerm">üìÖ Plazo (a√±os)</label>
                        <select id="loanTerm" class="form-select">
                            <option value="10">10 a√±os</option>
                            <option value="15">15 a√±os</option>
                            <option value="20">20 a√±os</option>
                            <option value="25">25 a√±os</option>
                            <option value="30" selected>30 a√±os</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="interestRate">üìä Tasa de Inter√©s Anual (%)</label>
                        <input type="number" id="interestRate" class="form-control" 
                               placeholder="3.5" value="3.5" min="0.1" max="50" step="0.1">
                    </div>

                    <div class="form-group">
                        <label for="downPayment">üè¶ Enganche</label>
                        <div class="input-group">
                            <span class="input-addon">$</span>
                            <input type="number" id="downPayment" class="form-control" 
                                   placeholder="40,000" value="40000" min="0" step="1000">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="insurance">üõ°Ô∏è Seguro Mensual</label>
                        <div class="input-group">
                            <span class="input-addon">$</span>
                            <input type="number" id="insurance" class="form-control" 
                                   placeholder="200" value="200" min="0" step="10">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="taxes">üèõÔ∏è Impuestos Mensuales</label>
                        <div class="input-group">
                            <span class="input-addon">$</span>
                            <input type="number" id="taxes" class="form-control" 
                                   placeholder="300" value="300" min="0" step="10">
                        </div>
                    </div>

                    <button class="btn-calculate" onclick="calculateLoan()">
                        üßÆ Calcular Pr√©stamo
                    </button>
                </div>

                <!-- Resultados -->
                <div class="results-card">
                    <h2 class="card-title">üìä Resultados del C√°lculo</h2>
                    
                    <div class="result-item">
                        <div class="result-value" id="monthlyPayment">$0.00</div>
                        <div class="result-label">Pago Mensual (P&I)</div>
                    </div>

                    <div class="result-item">
                        <div class="result-value" id="totalMonthlyPayment">$0.00</div>
                        <div class="result-label">Pago Total Mensual</div>
                    </div>

                    <div class="result-item">
                        <div class="result-value" id="totalInterest">$0.00</div>
                        <div class="result-label">Inter√©s Total</div>
                    </div>

                    <div class="result-item">
                        <div class="result-value" id="totalLoanCost">$0.00</div>
                        <div class="result-label">Costo Total del Pr√©stamo</div>
                    </div>

                    <div class="result-item">
                        <div class="result-value" id="ltvRatio">0%</div>
                        <div class="result-label">Relaci√≥n Pr√©stamo/Valor</div>
                    </div>
                </div>
            </div>

            <!-- Gr√°fico de Amortizaci√≥n -->
            <div class="chart-container">
                <h2 class="card-title">üìà Evoluci√≥n del Pr√©stamo</h2>
                <div class="chart-area">
                    <canvas id="amortizationChart"></canvas>
                </div>
            </div>

            <!-- Tabla de Amortizaci√≥n -->
            <div class="amortization-table">
                <h2 class="card-title">üìã Tabla de Amortizaci√≥n</h2>
                <div class="table-wrapper">
                    <table class="amortization-schedule">
                        <thead>
                            <tr>
                                <th>Per√≠odo</th>
                                <th>Pago Mensual</th>
                                <th>Principal</th>
                                <th>Inter√©s</th>
                                <th>Balance</th>
                            </tr>
                        </thead>
                        <tbody id="amortizationTableBody">
                            <!-- Se llenar√° din√°micamente -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Calculadora de Pr√©stamo Personal -->
        <div id="personal-content" class="tab-content">
            <div class="main-grid">
                <div class="calculator-card">
                    <h2 class="card-title">üë§ Pr√©stamo Personal</h2>
                    
                    <div class="form-group">
                        <label for="personalAmount">üí∞ Monto del Pr√©stamo</label>
                        <div class="input-group">
                            <span class="input-addon">$</span>
                            <input type="number" id="personalAmount" class="form-control" 
                                   placeholder="10,000" value="10000" min="1000" step="500">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="personalTerm">üìÖ Plazo (meses)</label>
                        <select id="personalTerm" class="form-select">
                            <option value="12">12 meses</option>
                            <option value="18">18 meses</option>
                            <option value="24" selected>24 meses</option>
                            <option value="36">36 meses</option>
                            <option value="48">48 meses</option>
                            <option value="60">60 meses</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="personalRate">üìä Tasa de Inter√©s Anual (%)</label>
                        <input type="number" id="personalRate" class="form-control" 
                               placeholder="12.5" value="12.5" min="1" max="50" step="0.1">
                    </div>

                    <button class="btn-calculate" onclick="calculatePersonalLoan()">
                        üßÆ Calcular Pr√©stamo Personal
                    </button>
                </div>

                <div class="results-card">
                    <h2 class="card-title">üìä Resultados Pr√©stamo Personal</h2>
                    
                    <div class="result-item">
                        <div class="result-value" id="personalMonthlyPayment">$0.00</div>
                        <div class="result-label">Pago Mensual</div>
                    </div>

                    <div class="result-item">
                        <div class="result-value" id="personalTotalInterest">$0.00</div>
                        <div class="result-label">Inter√©s Total</div>
                    </div>

                    <div class="result-item">
                        <div class="result-value" id="personalTotalCost">$0.00</div>
                        <div class="result-label">Costo Total</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calculadora de Financiamiento Auto -->
        <div id="car-content" class="tab-content">
            <div class="main-grid">
                <div class="calculator-card">
                    <h2 class="card-title">üöó Financiamiento Vehicular</h2>
                    
                    <div class="form-group">
                        <label for="carPrice">üí∞ Precio del Veh√≠culo</label>
                        <div class="input-group">
                            <span class="input-addon">$</span>
                            <input type="number" id="carPrice" class="form-control" 
                                   placeholder="25,000" value="25000" min="5000" step="1000">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="carDownPayment">üè¶ Enganche</label>
                        <div class="input-group">
                            <span class="input-addon">$</span>
                            <input type="number" id="carDownPayment" class="form-control" 
                                   placeholder="5,000" value="5000" min="0" step="500">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="carTerm">üìÖ Plazo (a√±os)</label>
                        <select id="carTerm" class="form-select">
                            <option value="3">3 a√±os</option>
                            <option value="4">4 a√±os</option>
                            <option value="5" selected>5 a√±os</option>
                            <option value="6">6 a√±os</option>
                            <option value="7">7 a√±os</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="carRate">üìä Tasa de Inter√©s Anual (%)</label>
                        <input type="number" id="carRate" class="form-control" 
                               placeholder="6.5" value="6.5" min="0.1" max="30" step="0.1">
                    </div>

                    <button class="btn-calculate" onclick="calculateCarLoan()">
                        üßÆ Calcular Financiamiento
                    </button>
                </div>

                <div class="results-card">
                    <h2 class="card-title">üìä Resultados Financiamiento</h2>
                    
                    <div class="result-item">
                        <div class="result-value" id="carMonthlyPayment">$0.00</div>
                        <div class="result-label">Pago Mensual</div>
                    </div>

                    <div class="result-item">
                        <div class="result-value" id="carTotalInterest">$0.00</div>
                        <div class="result-label">Inter√©s Total</div>
                    </div>

                    <div class="result-item">
                        <div class="result-value" id="carTotalCost">$0.00</div>
                        <div class="result-label">Costo Total</div>
                    </div>

                    <div class="result-item">
                        <div class="result-value" id="carLoanAmount">$0.00</div>
                        <div class="result-label">Monto Financiado</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comparador de Opciones -->
        <div id="comparison-content" class="tab-content">
            <div class="comparison-section">
                <h2 class="card-title">‚öñÔ∏è Comparador de Pr√©stamos</h2>
                <p style="color: #6b7280; margin-bottom: 1.5rem;">
                    Usa las otras calculadoras para generar opciones y luego comp√°ralas aqu√≠.
                </p>
                
                <div class="comparison-grid" id="comparisonGrid">
                    <div style="grid-column: 1 / -1; text-align: center; color: #6b7280; padding: 2rem;">
                        üìä Calcula diferentes opciones de pr√©stamo para compararlas
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sistema de Calculadoras de Cr√©dito
        class CreditCalculator {
            constructor() {
                this.charts = {};
                this.comparisons = [];
                this.initializeEventListeners();
                this.calculateLoan(); // C√°lculo inicial
            }

            // Event listeners
            initializeEventListeners() {
                // Tabs
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.switchTab(e.target.dataset.tab);
                    });
                });

                // Auto-calculate on input changes
                const inputs = document.querySelectorAll('.form-control, .form-select');
                inputs.forEach(input => {
                    input.addEventListener('input', () => {
                        // Auto-calculate after 1 second of no changes
                        clearTimeout(this.autoCalculateTimeout);
                        this.autoCalculateTimeout = setTimeout(() => {
                            const activeTab = document.querySelector('.tab-content.active').id;
                            if (activeTab === 'loan-content') this.calculateLoan();
                            else if (activeTab === 'personal-content') this.calculatePersonalLoan();
                            else if (activeTab === 'car-content') this.calculateCarLoan();
                        }, 1000);
                    });
                });
            }

            // Cambiar de tab
            switchTab(tabName) {
                // Remover active de todos los botones y contenidos
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

                // Activar el bot√≥n y contenido seleccionado
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
                document.getElementById(`${tabName}-content`).classList.add('active');

                // Auto-calculate en el nuevo tab
                setTimeout(() => {
                    if (tabName === 'loan') this.calculateLoan();
                    else if (tabName === 'personal') this.calculatePersonalLoan();
                    else if (tabName === 'car') this.calculateCarLoan();
                }, 100);
            }

            // Calcular pr√©stamo hipotecario
            calculateLoan() {
                const amount = parseFloat(document.getElementById('loanAmount').value) || 0;
                const downPayment = parseFloat(document.getElementById('downPayment').value) || 0;
                const termYears = parseInt(document.getElementById('loanTerm').value) || 30;
                const annualRate = parseFloat(document.getElementById('interestRate').value) || 0;
                const insurance = parseFloat(document.getElementById('insurance').value) || 0;
                const taxes = parseFloat(document.getElementById('taxes').value) || 0;

                const loanAmount = amount - downPayment;
                const monthlyRate = annualRate / 100 / 12;
                const totalPayments = termYears * 12;

                if (loanAmount <= 0 || monthlyRate <= 0) return;

                // F√≥rmula de pago mensual
                const monthlyPayment = loanAmount * 
                    (monthlyRate * Math.pow(1 + monthlyRate, totalPayments)) / 
                    (Math.pow(1 + monthlyRate, totalPayments) - 1);

                const totalInterest = (monthlyPayment * totalPayments) - loanAmount;
                const totalCost = loanAmount + totalInterest;
                const totalMonthlyPayment = monthlyPayment + insurance + taxes;
                const ltvRatio = (loanAmount / amount) * 100;

                // Actualizar UI
                document.getElementById('monthlyPayment').textContent = `$${monthlyPayment.toFixed(2)}`;
                document.getElementById('totalMonthlyPayment').textContent = `$${totalMonthlyPayment.toFixed(2)}`;
                document.getElementById('totalInterest').textContent = `$${totalInterest.toFixed(2)}`;
                document.getElementById('totalLoanCost').textContent = `$${totalCost.toFixed(2)}`;
                document.getElementById('ltvRatio').textContent = `${ltvRatio.toFixed(1)}%`;

                // Generar tabla de amortizaci√≥n
                this.generateAmortizationTable(loanAmount, monthlyPayment, monthlyRate, totalPayments);

                // Generar gr√°fico
                this.generateAmortizationChart(loanAmount, monthlyPayment, monthlyRate, totalPayments);

                // Agregar a comparaciones
                this.addToComparison({
                    type: 'Pr√©stamo Hipotecario',
                    amount: loanAmount,
                    monthlyPayment: totalMonthlyPayment,
                    totalInterest: totalInterest,
                    totalCost: totalCost,
                    term: `${termYears} a√±os`,
                    rate: `${annualRate}%`
                });
            }

            // Calcular pr√©stamo personal
            calculatePersonalLoan() {
                const amount = parseFloat(document.getElementById('personalAmount').value) || 0;
                const termMonths = parseInt(document.getElementById('personalTerm').value) || 24;
                const annualRate = parseFloat(document.getElementById('personalRate').value) || 0;

                const monthlyRate = annualRate / 100 / 12;

                if (amount <= 0 || monthlyRate <= 0) return;

                const monthlyPayment = amount * 
                    (monthlyRate * Math.pow(1 + monthlyRate, termMonths)) / 
                    (Math.pow(1 + monthlyRate, termMonths) - 1);

                const totalInterest = (monthlyPayment * termMonths) - amount;
                const totalCost = amount + totalInterest;

                document.getElementById('personalMonthlyPayment').textContent = `$${monthlyPayment.toFixed(2)}`;
                document.getElementById('personalTotalInterest').textContent = `$${totalInterest.toFixed(2)}`;
                document.getElementById('personalTotalCost').textContent = `$${totalCost.toFixed(2)}`;

                this.addToComparison({
                    type: 'Pr√©stamo Personal',
                    amount: amount,
                    monthlyPayment: monthlyPayment,
                    totalInterest: totalInterest,
                    totalCost: totalCost,
                    term: `${termMonths} meses`,
                    rate: `${annualRate}%`
                });
            }

            // Calcular financiamiento auto
            calculateCarLoan() {
                const carPrice = parseFloat(document.getElementById('carPrice').value) || 0;
                const downPayment = parseFloat(document.getElementById('carDownPayment').value) || 0;
                const termYears = parseInt(document.getElementById('carTerm').value) || 5;
                const annualRate = parseFloat(document.getElementById('carRate').value) || 0;

                const loanAmount = carPrice - downPayment;
                const monthlyRate = annualRate / 100 / 12;
                const totalPayments = termYears * 12;

                if (loanAmount <= 0 || monthlyRate <= 0) return;

                const monthlyPayment = loanAmount * 
                    (monthlyRate * Math.pow(1 + monthlyRate, totalPayments)) / 
                    (Math.pow(1 + monthlyRate, totalPayments) - 1);

                const totalInterest = (monthlyPayment * totalPayments) - loanAmount;
                const totalCost = loanAmount + totalInterest;

                document.getElementById('carMonthlyPayment').textContent = `$${monthlyPayment.toFixed(2)}`;
                document.getElementById('carTotalInterest').textContent = `$${totalInterest.toFixed(2)}`;
                document.getElementById('carTotalCost').textContent = `$${totalCost.toFixed(2)}`;
                document.getElementById('carLoanAmount').textContent = `$${loanAmount.toFixed(2)}`;

                this.addToComparison({
                    type: 'Financiamiento Auto',
                    amount: loanAmount,
                    monthlyPayment: monthlyPayment,
                    totalInterest: totalInterest,
                    totalCost: totalCost,
                    term: `${termYears} a√±os`,
                    rate: `${annualRate}%`
                });
            }

            // Generar tabla de amortizaci√≥n
            generateAmortizationTable(principal, monthlyPayment, monthlyRate, totalPayments) {
                const tbody = document.getElementById('amortizationTableBody');
                tbody.innerHTML = '';

                let balance = principal;
                
                // Mostrar solo los primeros 12 meses y luego cada a√±o
                for (let month = 1; month <= totalPayments; month++) {
                    const interestPayment = balance * monthlyRate;
                    const principalPayment = monthlyPayment - interestPayment;
                    balance -= principalPayment;

                    // Mostrar solo algunos per√≠odos para no sobrecargar la tabla
                    if (month <= 12 || month % 12 === 0 || month === totalPayments) {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${month}</td>
                            <td>$${monthlyPayment.toFixed(2)}</td>
                            <td>$${principalPayment.toFixed(2)}</td>
                            <td>$${interestPayment.toFixed(2)}</td>
                            <td>$${Math.max(0, balance).toFixed(2)}</td>
                        `;
                        tbody.appendChild(row);
                    }
                }
            }

            // Generar gr√°fico de amortizaci√≥n
            generateAmortizationChart(principal, monthlyPayment, monthlyRate, totalPayments) {
                const ctx = document.getElementById('amortizationChart').getContext('2d');
                
                if (this.charts.amortization) {
                    this.charts.amortization.destroy();
                }

                const data = this.generateChartData(principal, monthlyPayment, monthlyRate, totalPayments);

                this.charts.amortization = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: [
                            {
                                label: 'üí∞ Balance del Pr√©stamo',
                                data: data.balanceData,
                                borderColor: '#f59e0b',
                                backgroundColor: 'rgba(245, 158, 11, 0.1)',
                                borderWidth: 3,
                                fill: true,
                                tension: 0.4
                            },
                            {
                                label: 'üìä Principal Pagado',
                                data: data.principalData,
                                borderColor: '#10b981',
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                borderWidth: 3,
                                fill: true,
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    usePointStyle: true,
                                    padding: 20
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Generar datos para el gr√°fico
            generateChartData(principal, monthlyPayment, monthlyRate, totalPayments) {
                const labels = [];
                const balanceData = [];
                const principalData = [];
                
                let balance = principal;
                let principalPaid = 0;

                // Generar datos cada a√±o
                for (let year = 0; year <= Math.ceil(totalPayments / 12); year++) {
                    const month = year * 12;
                    if (month > totalPayments) break;

                    labels.push(`A√±o ${year}`);
                    balanceData.push(Math.max(0, balance));
                    principalData.push(principalPaid);

                    // Calcular pagos del siguiente a√±o
                    for (let i = 0; i < 12 && (month + i) < totalPayments; i++) {
                        const interestPayment = balance * monthlyRate;
                        const principalPayment = monthlyPayment - interestPayment;
                        balance -= principalPayment;
                        principalPaid += principalPayment;
                    }
                }

                return { labels, balanceData, principalData };
            }

            // Agregar a comparaciones
            addToComparison(loan) {
                // Evitar duplicados del mismo tipo
                this.comparisons = this.comparisons.filter(c => c.type !== loan.type);
                this.comparisons.push(loan);
                this.renderComparisons();
            }

            // Renderizar comparaciones
            renderComparisons() {
                const grid = document.getElementById('comparisonGrid');
                
                if (this.comparisons.length === 0) {
                    grid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; color: #6b7280; padding: 2rem;">
                            üìä Calcula diferentes opciones de pr√©stamo para compararlas
                        </div>
                    `;
                    return;
                }

                // Encontrar la mejor opci√≥n (menor pago mensual)
                const bestOption = this.comparisons.reduce((best, current) => 
                    current.monthlyPayment < best.monthlyPayment ? current : best
                );

                grid.innerHTML = this.comparisons.map(loan => `
                    <div class="comparison-card ${loan === bestOption ? 'best' : ''}">
                        <h3 style="margin: 0 0 1rem 0; color: #d97706; font-size: 1.25rem;">
                            ${loan.type}
                        </h3>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <div style="display: flex; justify-content: space-between;">
                                <span>üí∞ Monto:</span>
                                <strong>$${loan.amount.toLocaleString()}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>üìÖ Plazo:</span>
                                <strong>${loan.term}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>üìä Tasa:</span>
                                <strong>${loan.rate}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding-top: 0.5rem; border-top: 1px solid rgba(245, 158, 11, 0.2);">
                                <span>üí≥ Pago Mensual:</span>
                                <strong style="color: #d97706;">$${loan.monthlyPayment.toFixed(2)}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>üìà Inter√©s Total:</span>
                                <strong>$${loan.totalInterest.toFixed(2)}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>üí∏ Costo Total:</span>
                                <strong>$${loan.totalCost.toFixed(2)}</strong>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Funciones globales para los botones
        function calculateLoan() {
            window.creditCalculator.calculateLoan();
        }

        function calculatePersonalLoan() {
            window.creditCalculator.calculatePersonalLoan();
        }

        function calculateCarLoan() {
            window.creditCalculator.calculateCarLoan();
        }

        // Inicializar cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            window.creditCalculator = new CreditCalculator();
        });
    </script>
</body>
</html>
