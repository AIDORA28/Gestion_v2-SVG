<!DOCTYPE html>
<html lang="es" class="h-full bg-gray-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo IA - PLANIFICAPRO</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Notyf -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
    <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>

<body class="h-full">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="dashboard.html" class="flex items-center space-x-3">
                        <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-full p-2">
                            <i data-lucide="trending-up" class="h-6 w-6 text-white"></i>
                        </div>
                        <span class="text-xl font-bold text-gray-900">PLANIFICAPRO</span>
                        <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full ml-2">ü§ñ IA DEMO</span>
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="dashboard.html" class="text-gray-600 hover:text-gray-900 text-sm font-medium">‚Üê Volver al Dashboard</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <!-- Header -->
            <div class="mb-8">
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6 border border-blue-200">
                    <div class="text-center">
                        <h1 class="text-3xl font-bold text-gray-900 mb-2">ü§ñ Demostraci√≥n de IA</h1>
                        <p class="text-gray-600 mb-4">Funcionalidades de Inteligencia Artificial desarrolladas por <strong>Gemini Quispe</strong></p>
                        <div class="flex justify-center space-x-4 text-sm">
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full">‚úÖ Smart Categorization</span>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full">‚úÖ IA Chat Assistant</span>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full">‚úÖ API Endpoints</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <!-- Smart Categorization Demo -->
                <div class="bg-white rounded-lg shadow-lg border border-gray-200 p-6">
                    <div class="flex items-center mb-4">
                        <div class="bg-blue-100 p-2 rounded-lg mr-3">
                            <i data-lucide="brain" class="h-6 w-6 text-blue-600"></i>
                        </div>
                        <h2 class="text-xl font-semibold text-gray-900">Smart Categorization</h2>
                    </div>
                    
                    <p class="text-gray-600 mb-6">Categorizaci√≥n inteligente autom√°tica basada en la descripci√≥n del gasto.</p>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Descripci√≥n del gasto:</label>
                            <input type="text" id="demo-description" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                                   placeholder="Ej: Almuerzo en restaurante...">
                        </div>
                        
                        <button onclick="demoCategorizacion()" 
                                class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors">
                            ü§ñ Categorizar Autom√°ticamente
                        </button>
                        
                        <div id="demo-result" class="hidden p-4 bg-gray-50 border border-gray-200 rounded-md">
                            <!-- Results will appear here -->
                        </div>
                    </div>
                    
                    <!-- Quick Test Buttons -->
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <p class="text-sm font-medium text-gray-700 mb-3">Pruebas r√°pidas:</p>
                        <div class="grid grid-cols-2 gap-2 text-xs">
                            <button onclick="quickDemo('Almuerzo en McDonalds')" class="bg-gray-200 text-gray-700 py-2 px-3 rounded hover:bg-gray-300">üçΩÔ∏è Comida</button>
                            <button onclick="quickDemo('Gasolina del auto')" class="bg-gray-200 text-gray-700 py-2 px-3 rounded hover:bg-gray-300">üöó Transporte</button>
                            <button onclick="quickDemo('Internet wifi casa')" class="bg-gray-200 text-gray-700 py-2 px-3 rounded hover:bg-gray-300">üè† Vivienda</button>
                            <button onclick="quickDemo('Netflix subscription')" class="bg-gray-200 text-gray-700 py-2 px-3 rounded hover:bg-gray-300">üé¨ Entretenimiento</button>
                        </div>
                    </div>
                </div>

                <!-- IA Chat Assistant Demo -->
                <div class="bg-white rounded-lg shadow-lg border border-gray-200 p-6">
                    <div class="flex items-center mb-4">
                        <div class="bg-green-100 p-2 rounded-lg mr-3">
                            <i data-lucide="message-circle" class="h-6 w-6 text-green-600"></i>
                        </div>
                        <h2 class="text-xl font-semibold text-gray-900">IA Chat Assistant</h2>
                    </div>
                    
                    <p class="text-gray-600 mb-6">Asistente inteligente para consultas financieras y navegaci√≥n.</p>
                    
                    <div class="bg-gray-50 rounded-lg p-4 mb-4 h-48 overflow-y-auto" id="demo-chat-area">
                        <div class="text-center text-gray-500 text-sm">
                            El Chat Assistant aparece como un bot√≥n flotante en el dashboard.<br>
                            <strong>¬°Pru√©balo ahora!</strong>
                        </div>
                    </div>
                    
                    <div class="space-y-3">
                        <button onclick="testChatQuery('¬øCu√°nto gast√© este mes?')" 
                                class="w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 text-sm">
                            üí¨ "¬øCu√°nto gast√© este mes?"
                        </button>
                        <button onclick="testChatQuery('¬øCu√°l es mi balance?')" 
                                class="w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 text-sm">
                            üí¨ "¬øCu√°l es mi balance?"
                        </button>
                        <button onclick="testChatQuery('Ayuda')" 
                                class="w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 text-sm">
                            üí¨ "Ayuda"
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- API Status -->
            <div class="mt-8">
                <div class="bg-white rounded-lg shadow-lg border border-gray-200 p-6">
                    <div class="flex items-center mb-4">
                        <div class="bg-purple-100 p-2 rounded-lg mr-3">
                            <i data-lucide="activity" class="h-6 w-6 text-purple-600"></i>
                        </div>
                        <h2 class="text-xl font-semibold text-gray-900">Estado del Sistema IA</h2>
                    </div>
                    
                    <div id="api-status" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="text-center p-4 bg-gray-50 rounded-lg">
                            <div class="text-2xl mb-2">üîÑ</div>
                            <div class="text-sm text-gray-600">Cargando estado...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- AI Scripts -->
    <script src="js/ai-smart-categorization.js"></script>
    <script src="js/ai-chat-assistant.js"></script>
    <script src="js/ai-api-endpoint.js"></script>
    
    <script>
        const notyf = new Notyf();
        
        function demoCategorizacion() {
            const description = document.getElementById('demo-description').value.trim();
            if (!description) {
                notyf.error('Por favor ingresa una descripci√≥n');
                return;
            }
            
            // Use API endpoint
            window.aiAPI.categorize(description).then(result => {
                if (result.success) {
                    showCategorizationResult(description, result.data);
                    notyf.success('¬°Categorizaci√≥n completada!');
                } else {
                    notyf.error('Error en categorizaci√≥n: ' + result.error);
                }
            });
        }
        
        function quickDemo(description) {
            document.getElementById('demo-description').value = description;
            demoCategorizacion();
        }
        
        function showCategorizationResult(description, data) {
            const resultDiv = document.getElementById('demo-result');
            const categoryNames = {
                'alimentacion': 'üçΩÔ∏è Alimentaci√≥n',
                'transporte': 'üöó Transporte',
                'vivienda': 'üè† Vivienda',
                'salud': 'üè• Salud',
                'entretenimiento': 'üé¨ Entretenimiento',
                'educacion': 'üìö Educaci√≥n',
                'tecnologia': 'üíª Tecnolog√≠a',
                'ropa': 'üëï Ropa',
                'servicios': 'üîß Servicios',
                'otros': 'üìù Otros'
            };
            
            resultDiv.innerHTML = `
                <div class="space-y-2">
                    <div class="flex justify-between items-center">
                        <span class="font-medium text-gray-900">Resultado:</span>
                        <span class="text-lg">${data.confidence > 70 ? 'üéØ' : data.confidence > 40 ? '‚úÖ' : '‚ö†Ô∏è'}</span>
                    </div>
                    <div class="text-lg font-semibold text-blue-600">${categoryNames[data.categoria]}</div>
                    <div class="text-sm text-gray-600">Confianza: ${Math.round(data.confidence)}%</div>
                    <div class="text-xs text-gray-500">${data.reason}</div>
                    <div class="text-xs text-gray-400">M√©todo: ${data.method}</div>
                </div>
            `;
            resultDiv.classList.remove('hidden');
        }
        
        function testChatQuery(message) {
            window.aiAPI.chat(message).then(result => {
                if (result.success) {
                    addChatMessage(message, result.data.response);
                    notyf.success('Consulta procesada');
                } else {
                    notyf.error('Error en chat: ' + result.error);
                }
            });
        }
        
        function addChatMessage(question, response) {
            const chatArea = document.getElementById('demo-chat-area');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'mb-3 text-sm';
            messageDiv.innerHTML = `
                <div class="bg-blue-100 p-2 rounded mb-1">
                    <strong>T√∫:</strong> ${question}
                </div>
                <div class="bg-white border p-2 rounded">
                    <strong>ü§ñ IA:</strong> ${response}
                </div>
            `;
            
            chatArea.innerHTML = '';
            chatArea.appendChild(messageDiv);
        }
        
        function loadAPIStatus() {
            window.aiAPI.stats().then(result => {
                if (result.success) {
                    showAPIStatus(result.data);
                } else {
                    document.getElementById('api-status').innerHTML = `
                        <div class="col-span-3 text-center text-red-600">
                            Error cargando estado de IA
                        </div>
                    `;
                }
            });
        }
        
        function showAPIStatus(stats) {
            const statusDiv = document.getElementById('api-status');
            statusDiv.innerHTML = `
                <div class="text-center p-4 bg-green-50 rounded-lg">
                    <div class="text-2xl mb-2">${stats.smart_categorization.enabled ? '‚úÖ' : '‚ùå'}</div>
                    <div class="font-medium">Smart Categorization</div>
                    <div class="text-xs text-gray-600">${stats.smart_categorization.categories_available} categor√≠as</div>
                </div>
                <div class="text-center p-4 bg-blue-50 rounded-lg">
                    <div class="text-2xl mb-2">${stats.chat_assistant.enabled ? '‚úÖ' : '‚ùå'}</div>
                    <div class="font-medium">Chat Assistant</div>
                    <div class="text-xs text-gray-600">${stats.chat_assistant.intents_available} intenciones</div>
                </div>
                <div class="text-center p-4 bg-purple-50 rounded-lg">
                    <div class="text-2xl mb-2">ü§ñ</div>
                    <div class="font-medium">IA v${stats.general.ai_version}</div>
                    <div class="text-xs text-gray-600">by ${stats.general.developer}</div>
                </div>
            `;
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            
            // Load API status
            setTimeout(loadAPIStatus, 1000);
            
            // Welcome message
            setTimeout(() => {
                notyf.success('ü§ñ Sistema IA cargado - Demo listo');
            }, 1500);
        });
    </script>

</body>
</html>